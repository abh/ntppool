/**
 * Custom component styles for NTP Pool Project
 * Comprehensive conversion from original CSS files: main.css, content.css, fonts.css
 */

// CSS Variables and Bootstrap Configuration
:root {
    --bs-nav-link-color: #3885b4;
    --bs-link-color: #3885b4;
}

// Base body styles
body {
    color: #222;
    font-size: 15px;
    font-family: merriweather, "Georgia", serif;
    font-weight: 400;
}

// Links and headings
a {
    color: #3885B4;
}

h1, h2, h3, h4, h5 {
    color: #454545;
}

// Header styles
#hd {
    min-height: 10px;

    h1 {
        display: none;
    }

    p.develwarning {
        padding: 3px;
        margin-bottom: 10px;
        text-align: center;
        font-size: 88%;
        border: 1px solid #f00;
        border-top: 0;
        background-color: #fafafa;
    }
}

// Sidebar styles
#sidebar {
    padding: 0 10px 0 10px;

    h1 a {
        display: block;
        height: 138px;
        background: no-repeat url(@/assets/images/logo-2019@x2.png);
        background-size: 120px 150px;
        background-position: center center;
        background-repeat: no-repeat;
        text-indent: -9000px;
        margin: auto;
        margin-bottom: 15px;
    }

    h3 {
        font-family: 'Economica', sans-serif;
        font-size: 144%;
        padding: 3px 0;
        margin-bottom: 2px;
    }

    .manage-sidebar {
        padding: .6rem .75rem .5reml .5rem;
    }
}

// Navigation icons
#nav .feather {
    width: 30px;
    height: 30px;
    stroke: currentColor;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
    fill: none;
}

// Module styles
.mod {
    margin-bottom: 15px;
    font-size: 114%;

    h3 {
        font-family: 'Economica', sans-serif;
        font-size: 144%;
        padding: 3px 0;
        margin-bottom: 2px;
    }
}

// Activity and list styles
#activity ul {
    margin: 0;
}

#translations ul,
#quickstart ul {
    padding: 0;
    margin: 0 0 0 15px;
    list-style: none;
}

// Navigation styling with Economica font
ul#nav li {
    font-size: 30px;
    font-family: 'Economica', sans-serif;
    font-variant: small-caps;
    font-weight: 700;
    list-style: none;

    a {
        float: left;
        display: block;
        height: 40px;
        color: #5A595B;
        padding: 10px 10px 10px 40px;
        margin-right: 20px;
        text-decoration: none;

        &:hover {
            color: #3885B4;
        }
    }
}

// Main content area headers with Bree Serif
#mainbar h1,
h2,
h3,
h4 {
    margin: 15px 0 0 0;
    font-family: 'Bree Serif', serif;
}

// Server area map backgrounds
#servers .area {
    .africa-img {
        background: no-repeat url(@/assets/images/maps/wrld-af.svg);
    }

    .antarctica-img {
        background: no-repeat url(@/assets/images/maps/wrld-an.svg);
    }

    .north-america-img {
        background: no-repeat url(@/assets/images/maps/wrld-na.svg);
    }

    .south-america-img {
        background: no-repeat url(@/assets/images/maps/wrld-sa.svg);
    }

    .europe-img {
        background: no-repeat url(@/assets/images/maps/wrld-eu.svg);
    }

    .asia-img {
        background: no-repeat url(@/assets/images/maps/wrld-as.svg);
    }

    .oceania-img {
        background: no-repeat url(@/assets/images/maps/wrld-oc.svg);
    }

    .global-img {
        background: no-repeat url(@/assets/images/maps/wrld.svg);
    }
}

// Homepage tagline styling
div#tagline {
    font-size: 122%;
    font-style: italic;
    text-align: right;
    margin: 0;
    padding: 0;
    float: right;
}

// Server area layout styling
#servers .area {
    clear: both;
    padding: 4px 0;
    font-size: 115%;
    list-style: none;

    .location {
        display: block;
        width: 125px;
        height: 40px;
        float: left;
        font-size: 100%;

        a {
            text-decoration: none;

            &:hover {
                border-bottom: 1px solid #7EC6EC;
            }
        }
    }

    .location-img {
        display: block;
        width: 50px;
        height: 40px;
        float: left;
        font-size: 100%;
        filter: invert(.35);
    }

    .all-servers {
        font-weight: bold;
        margin-top: 5px;
    }
}

#servers .count {
    margin: 10px;
}

// Code and pre styling
pre,
tt,
code {
    color: #002D62;
    font-family: source-code-pro, "source-code-pro-1", "source-code-pro-2", monospace;
    font-weight: 400;
    font-size: 15px;
    line-height: 18px;
}

pre.code {
    background-color: #eee;
    padding: 10px;
    margin: 5px 0;
}

// Utility classes
.clearboth {
    clear: both;
}

a.up {
    display: block;
    text-align: right;
    font-variant: small-caps;
}

// Other missing styles from content.css
#quickstart li {
    margin-bottom: 10px;
}

.graph-desc {
    display: none;
    color: #777;
    margin-top: 5px;
}

.server-id {
    font-size: 60%;
}

// Active Servers box on homepage
#activity {
    float: right;
    padding: 10px;
    border: 1px solid #ddd;
    margin: 0 0 10px 10px;

    h3 {
        margin: 0;
    }

    ul {
        padding-inline-start: 0px;
    }

    .date {
        display: block;
        font-size: 92%;
        text-align: right;
        clear: both;
        margin-top: 40px;
    }
}

// Italic text styling
em {
    font-style: italic;
}

// Footer styles
#ft {
    text-align: right;
    margin-right: 10px;
    font-size: 88%;

    .color-dot {
        -moz-border-radius: 99px;
        -webkit-border-radius: 99px;
        border-radius: 99px;
        display: inline-block;
        width: 10px;
        height: 10px;
        margin-right: 5px;

        &.critical {
            background-color: #e74c3c;
        }

        &.major {
            background-color: #e67e22;
        }

        &.minor {
            background-color: #f1c40f;
        }

        &.none {
            background-color: #2ecc71;
        }
    }
}

// Utility classes
.hidden {
    visibility: hidden;
    display: none;
}

.visible {
    display: block;
}

// HTMX Integration styles
.htmx-indicator {
    opacity: 0;
}

.htmx-request .htmx-indicator {
    opacity: 1;
    transition: opacity 200ms ease-in;
}

.htmx-request.htmx-indicator {
    opacity: 1;
    transition: opacity 200ms ease-in;
}

// News section styles
ul#news {
    li {
        padding-top: 5px;
        padding-bottom: 10px;
        border-bottom: 1px solid #ccc;
        min-height: 29px;

        &.last {
            border: 0;
        }

        div.date {
            float: left;
            font-size: 122%;
            color: #3885B4;
            padding: 3px 5px;
            margin: 0 7px 5px 0;
        }

        ul li {
            border: 0;
            list-style-type: disc;
            margin-left: 25px;
        }
    }

    h4 {
        padding-bottom: 5px;
    }
}

// Use page styles
.block span.hook {
    font-weight: bold;
}

p.thanks {
    font-style: italic;
    font-weight: bold;
}

// Admin/manage styles
#admin {
    .profile {
        padding: 10px;
        border-bottom: 1px solid #ccc;
        margin-bottom: 5px;
    }

    .value span {
        font-size: 107%;
    }

    .server_desc {
        font-size: 88%;
    }
}

// User profile styles
#userprofile .server {
    border-bottom: 1px dotted #bbb;
    padding-bottom: 10px;
    margin-bottom: 15px;
}

// Login form styles
#login-form {
    padding-bottom: 30px;
    padding-top: 20px;

    input.gotcha {
        display: none;
    }
}

// Table styles
table.servertable {
    width: 100%;
    margin: 5px 0;
}

tr.deleted_server {
    text-decoration: line-through;
}

// Graph and miscellaneous styles
.graph_explanation {
    display: none;
    width: 400px;
    margin-left: 30px;
    margin-top: 10px;
    padding: 9px;
    border: 1px dotted #999;
}

dt {
    margin-top: 10px;
    font-weight: bold;
}

p.develwarning {
    border: 1px dotted #555555;
    background: #DDDDDD;
    padding: 15px;
    width: 750px;
    margin: 0 10px 10px 10px;
}

// Vendor and DNS info styles
#vendor_list {
    border: 1px dotted #999;
    text-align: right;
    margin: auto;
    width: 250px;

    li {
        background: red;
    }
}

#vendor_content {
    float: left;
}

#dnsinfo td {
    padding: 8px;
}

// Server history styles
span.s_his {
    font-family: source-code-pro, monospace;

    &_ok {
        color: green;
        font-size: 80%;
    }

    &_tol {
        color: yellow;
    }

    &_big {
        color: #ffa500;
    }

    &_down {
        color: red;
    }
}

// Error and status styles
span.error {
    color: red;
}

div.error {
    color: red;
}

span.deletion {
    color: red;
}

// SVG Graph styles
.total_score {
    fill: none;
    stroke: blue;
    stroke-width: 2px;
}

.zone_graph {
    .registered_count {
        fill: none;
        stroke: #00cccc;
        stroke-width: 1px;
    }

    .active_count {
        fill: none;
        stroke: #006600;
        stroke-width: 2px;
    }

    .inactive_count {
        fill: none;
        stroke: #dd9000;
        stroke-width: 1px;
    }

    .y line {
        stroke: #ddd;
        shape-rendering: crispEdges;
        stroke-dasharray: 2, 2, 2, 2;
    }

    .v6 {
        stroke-dasharray: 2, 3, 2, 3;
    }
}

.graph {
    font-size: 90%;

    rect {
        fill: none;
        stroke: black;
        shape-rendering: crispEdges;
    }

    .x line,
    .y line {
        stroke: #ccc;
        shape-rendering: crispEdges;
    }

    .y_score line {
        stroke: #ddd;
        shape-rendering: crispEdges;
        stroke-dasharray: 2, 2, 2, 2;
    }
}

// Bootstrap table overrides
.table-success {
    background-color: var(--bs-table-bg, #d1e7dd) !important;
}

.table-info {
    background-color: var(--bs-table-bg, #cff4fc) !important;
}

.table-light {
    background-color: var(--bs-table-bg, #f8f9fa) !important;
}

.table-secondary {
    background-color: var(--bs-table-bg, #e2e3e5) !important;
}

table.table-hover tbody tr:hover td,
table.table-hover tbody tr:hover th {
    background-color: rgba(0, 0, 0, .075) !important;
}

table.table td,
table.table th {
    padding: .35rem !important;
}

// Form and interface styles
img.atom-logo {
    vertical-align: middle;
    margin-right: 3px;
}

#account-form {
    .form-group {
        margin-top: 14px;
    }

    .form-label {
        font-weight: bold;
    }
}

#monitor-form .form-floating {
    margin-top: 5px;
}

#manage-sidebar {
    .account-name {
        white-space: normal;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .logout-item {
        overflow-y: auto;
        overflow-x: hidden;
        word-wrap: break-word;
    }
}

// Additional UI elements
p.serverurls {
    font-size: 0.8em;
}

#zone_counts td {
    padding-right: 8px;
    vertical-align: text-top;
}

em.beta {
    color: #888;
}

#add_server {
    margin-bottom: 20px;

    &_form div.server_info {
        margin-top: 10px;
    }
}

.log-border {
    border-top: solid gray 1px;
}

.log-changes {
    line-height: 15px;
    padding: 0;
    margin: 0;
}

.btn-inline {
    display: inline-block;
}

ul.product-details {
    margin-bottom: 1em;

    li.continue {
        list-style-type: none;
    }
}

div.product-header {
    margin-bottom: 0.5em;
    margin-top: 1em;
}

div.product-group .btn {
    margin: 3px;
}

// Override Bootstrap's automatic color contrast calculation for btn-primary
// Bootstrap calculates that #3885B4 background needs black text for accessibility,
// but design requires white text for visual consistency
.btn-primary {
    --bs-btn-color: #ffffff !important;
    --bs-btn-hover-color: #ffffff !important;
    --bs-btn-active-color: #ffffff !important;
    --bs-btn-disabled-color: #ffffff !important;
}

// Server Chart Legend Styles
.legend-table {
    width: 100%;
    margin-bottom: 0;

    td {
        padding: 0.05rem 0.3rem;
        border: none;
        font-size: 0.8rem;
        vertical-align: top;
    }

    th {
        padding: 0.2rem 0.5rem;
        border: none;
        font-size: 0.85rem;
        font-weight: 600;
        height: 1.8rem;
    }

    .monitor-name {
        width: 40%;
    }

    .monitor-score {
        width: 8%;
        text-align: right;
    }

    tbody tr td.monitor-rtt {
        width: 8% !important;
        text-align: left !important;
        font-size: 0.7rem !important;
        color: #495057 !important;
        padding-left: 0.2rem !important;
        font-weight: normal !important;
    }

    // Standard 2-column layout (Active/Testing)
    .monitor-name {
        min-width: 120px;
        max-width: 200px;
        width: 40%;
    }

    .monitor-score {
        min-width: 40px;
        max-width: 80px;
        width: 15%;
        text-align: right;
    }

    .monitor-rtt {
        min-width: 50px;
        max-width: 80px;
        width: 15%;
        text-align: left;
    }

    // 3-column layout (Candidate)
    .monitor-name-3col {
        min-width: 100px;
        max-width: 150px;
        width: 20%;
    }

    .monitor-score-3col {
        min-width: 30px;
        max-width: 50px;
        width: 8%;
        text-align: right;
    }

    .column-gap {
        min-width: 10px;
        max-width: 20px;
        width: 3%;
    }

    .status-header {
        text-align: left;
    }

    .empty-cell {
        padding: 0;
        border: none;
    }

    tbody tr:hover td,
    tbody tr:hover th {
        background-color: transparent !important;
    }

    &.table tbody tr td.monitor-cell-hover {
        --bs-table-accent-bg: rgba(0, 0, 0, 0.075) !important;
    }
}

// Chart container styles to avoid inline CSS and maintain proper SVG sizing
.chart-container {
    // Prevent container from expanding beyond SVG's intended dimensions
    display: inline-block;
    max-width: max-content;

    svg {
        // Ensure SVG respects its width/height attributes and doesn't scale up
        max-width: none !important;
        width: attr(width px, auto);
        height: attr(height px, auto);
    }
}

.legend-container {
    // Allow natural sizing to match chart width, up to chart maximum (640px)
    display: inline-block;
    max-width: 640px;  // Allow full chart width instead of limiting to content
    width: 100%;       // Take available width up to max-width

    // Add spacing above legend (about one line height)
    margin-top: 1.2em;

    // Remove unwanted Bootstrap styling - clean appearance
    border: none !important;
    background: none !important;
    padding: 0 !important;
    margin-bottom: 0 !important;
    margin-right: 0 !important;

    // Remove left padding - legend starts at chart edge
    margin-left: 0 !important;

    // Override all padding classes to remove left margin
    &.padding-20,
    &.padding-30,
    &.padding-40,
    &.padding-50,
    &.padding-60,
    &.padding-70,
    &.padding-80,
    &.padding-90,
    &.padding-100 {
        margin-left: 0 !important;
    }
}

.legend-spacer {
    height: 0.75rem;
}

.graph-desc-visible {
    display: block;
}

// RTT cell fallback styles (for CSP compliance)
.monitor-rtt-fallback {
    font-size: 0.7rem;
    color: #495057;
    font-weight: normal;
}

// Chart status link hidden
.status-link-hidden {
    display: none;
}

// Chart tooltip box visible
.tooltip-box-visible {
    display: block;
}

// SVG dimension utilities (CSP compliant)
.chart-svg {
    width: var(--chart-width, 100%);
    height: var(--chart-height, auto);
}

// Chart Web Component Styles (moved from TypeScript files)
.chart-container {
    width: 100%;
    height: 100%;
    position: relative;
    min-height: 200px;
    background: white;
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);

    svg {
        width: 100%;
        height: auto;
        max-width: 100%;

        .line {
            fill: none;
            stroke-width: 2;

            &.registered_count {
                stroke: #1f77b4;
            }

            &.active_count {
                stroke: #2ca02c;
            }

            &.inactive_count {
                stroke: #ff7f0e;
            }

            &.v6 {
                stroke-dasharray: 5,5;
            }
        }

        .legend {
            font-size: 12px;

            .legend-item:hover {
                opacity: 0.8;
            }
        }

        .x-axis line,
        .y-axis line {
            stroke: #e0e0e0;
            stroke-dasharray: 2,2;
        }

        .x-axis text,
        .y-axis text {
            fill: #6b7280;
            font-size: 12px;
        }
    }
}

.chart-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    color: #666;

    .spinner {
        width: 1rem;
        height: 1rem;
        border: 2px solid #e5e7eb;
        border-top: 2px solid #3b82f6;
        border-radius: 50%;
        animation: chart-spinner-spin 1s linear infinite;
        margin-right: 0.5rem;
    }
}

@keyframes chart-spinner-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

// Zone Chart Specific Styles
.zone-info {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: rgba(255, 255, 255, 0.9);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    color: #6b7280;
    border: 1px solid #e5e7eb;
    pointer-events: none;
}

.ip-version-toggle {
    margin-top: 0.5rem;
    display: flex;
    gap: 0.5rem;
    justify-content: center;

    .version-button {
        padding: 0.25rem 0.75rem;
        border: 1px solid #d1d5db;
        background: white;
        border-radius: 4px;
        font-size: 0.875rem;
        cursor: pointer;
        transition: all 0.2s;

        &:hover {
            background: #f3f4f6;
        }

        &.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
    }
}

// Server Chart Legend Container
.legend-container {
    margin-top: 1rem;
    padding: 0.75rem;
    background: #f9fafb;
    border-radius: 4px;
    border: 1px solid #e5e7eb;

    table {
        width: 100%;
        font-size: 0.875rem;
        border-collapse: collapse;

        th,
        td {
            padding: 0.25rem 0.5rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        tr:hover {
            background-color: rgba(59, 130, 246, 0.05);
        }

        .table-success {
            background-color: rgba(16, 185, 129, 0.1);
        }

        .table-info {
            background-color: rgba(59, 130, 246, 0.1);
        }

        .table-secondary {
            background-color: rgba(107, 114, 128, 0.1);
        }

        .table-danger {
            background-color: rgba(239, 68, 68, 0.1);
        }

        .fw-bold {
            font-weight: 600;
        }
    }
}

// Chart responsive adjustments
@container (max-width: 480px) {
    .chart-container {
        min-height: 180px;
    }
}

@container (max-width: 600px) {
    .zone-info {
        position: static;
        margin-bottom: 0.5rem;
        text-align: center;
    }

    .ip-version-toggle {
        margin-top: 0.25rem;

        .version-button {
            font-size: 0.75rem;
            padding: 0.1875rem 0.5rem;
        }
    }

    .legend-container {
        margin-top: 0.5rem;
        padding: 0.5rem;

        table {
            font-size: 0.75rem;
        }
    }
}

[% page.title = 'Як налаштувати NTP, щоб використовувати пул?' %]

<div class="block">
	<h3><a name="use"></a>Як користуватись pool.ntp.org?</h3>
	
	<p>
	Якщо ви бажаєте синхронізувати годинник вашого комп'ютера за допомогою 
	програми ntpd, яку <a href="http://www.ntp.org">розповсюджує ntp.org</a> 
	(працює в більшості оперційних сисем — <b>Linux, *BSD, Windows та інші</b>), 
	достатньо буде такої конфігурації:
	</p>

<pre class="code">
driftfile /var/lib/ntp/ntp.drift

server 0.pool.ntp.org
server 1.pool.ntp.org
server 2.pool.ntp.org
server 3.pool.ntp.org</pre>
	<p>
	Імена 0, 1 та 2.pool.ntp.org вказують на випадково обрані сервери з пулу, 
	які переобираються кожну годину. Переконайтесь в тому, що годинник вашого комп'ютера 
	вказує на час, близький до реального. Можна зробити одноразову синхронізацію, виконавши 
	<tt>ntpdate pool.ntp.org</tt>, або просто встановити час вручну за допомогою 
	команди <tt>date</tt>. Стартуйте ntpd, та через деякий час (півгодини) команда 
	<tt>ntpq -pn</tt> має показати щось на зразок цього:
	</p>
<pre class="code ntpq">
avbidder:~$ ntpq -p
     remote           refid      st t when poll reach   delay   offset  jitter
==============================================================================
+81.6.42.224     193.5.216.14     2 u   68 1024  377  158.995   51.220  50.287
*217.162.232.173 130.149.17.8     2 u  191 1024  176   79.245    3.589  27.454
-129.132.57.95   131.188.3.222    3 u  766 1024  377   22.302   -2.928   0.508
</pre> 
	<p>
	IP адреси можуть бути інші тому, що сервери обираються випадково. Важливо, щоб одна 
	з ліній починалась з зірочки (<tt>*</tt>). Це означає, що годинник вашого комп'ютера 
	синхронізовано з Інтернетом. Віднині ви не маєте хвилюватися про це.
	</p>
	<p>
	Так, як ім'я <tt>pool.ntp.org</tt> присвоюється серверам по всьому світу, якість синхронізації 
	не завжди буде ідеальна. Ви зробите краще, якщо будете використовувати 
	<a href="/zone/@">континентальні зони</a> (наприклад,
	<a href="/zone/europe">europe</a>,
        <a href="/zone/north-america">north-america</a>,
        <a href="/zone/oceania">oceania</a>
	або <a href="/zone/asia">asia</a>.pool.ntp.org).
	Та ще краще використовувати зону вашої країни (наприклад, ua.pool.ntp.org для України).
	Для всіх цих зон ви можете використовувати префікси 0,1,2, наприклад, 0.ua.pool.ntp.org.
	Може так трапитися, що зона для вашої країни поки не існує, або містит один або два 
	сервери. Якщо ви знаєте сервери часу, що близькі до вас (мережеву дистанцію можна 
	з'ясувати за топомогою <tt>traceroute</tt> або <tt>ping</tt>), можливо, краще буде 
	використовувати саме їх.
	</p>
	<p>
	Якщо ви використовуєте <b>Windows останніх версій</b>, ви також можете використовувати 
	вбудований в систему ntp клієнт. Тільки наберіть:</p>
<pre class="code">
net time /setsntp:pool.ntp.org
</pre>
	<p>
	В Windows деяких версій можливо вказувати більше одного серверу:
<pre class="code">
net time /setsntp:"0.pool.ntp.org 1.pool.ntp.org 2.pool.ntp.org"
</pre>
	</p>
	<p>
	Має спрацювати в Windows 2000/XP/2003. Це саме можна зробити, якщо зайти з правами адміністратора, 
	клацнути правою кнопкою миші по годиннику на панелі задач, обрати 'Налаштування Дати/Часу' та 
	ввести ім'я серверу в поле 'Час Інтернету'.
	</p>

	<p>
	Фірма Meinberg портувала <a href="http://www.meinberg.de/english/sw/ntp.htm">ntpd в Windows</a>.
	</p>

	<p>
	Якщо ваша Windows є частиною домену, можливо ви не зможете корегувати час вашого комп'ютера незалежно від домену.
	Дивіться <a href="http://technet2.microsoft.com/WindowsServer/en/library/71e76587-28f4-4272-a3d7-7f44ca50c0181033.mspx?mfr=true">як працює Windows Time Service</a>.
	</p>
</div>

<div class="block">
	<h3>Додаткові зауваження</h3>
	<p><span class="hook">Якщо у вас є статична IP адреса та відповідне підключення до Інтернет</span> (пропускна 
	здатність не важлива, головне, щоб з'єднання було стабільним і не дуже завантаженим), будь ласка, подумайте над тим, 
	щоб увійти в пул. Це буде коштувати вам не більше, ніж декілька сотен байт в секунду вашого трафіку, але 
	ви допоможете вижити нашому проекту. Будь ласка, прочитайте про те, як <a href="/join.html">приєднатись до проекту</a>.
	</p>
	
	<p><span class="hook">Якщо ваш Інтернет провайдер має власні сервери часу</span>, або якщо ви 
	знаєте хороші сервери часу поблизу, ви маєте використовувати їх і не використовувати сервери пулу. В цьому випадку 
	ви отримаєте більш якісну синхронізацію при меншому навантаженню на мережу. Якщо ви знаєте 
	тільки один сервер часу поблизу вас, використовуйте його і два сервери з pool.ntp.org.</p>
	
	<p><span class="hook">Інколи може статися так, що ви двічі отримуєте один і той самий сервер</span> - 
	рестарт ntp вирішить цю проблему. Якщо ви використовуєте зону вашої країни, врахуйте, що в ній може бути лише 
	пара серверів. В цьому випадку краще використовувати континентальну зону. Ви можете <a href="/zone">переглянути зони</a>, 
	щоб дізнатися кількість серверів в кожній.</p>

	<p><span class="hook">Будьте доброзичливі</span>. Багато серверів надають добровольці і майже всі сервери часу 
	в дійсності є файловими, почтовими або web-серверами на яких просто запущено ntpd.	
	Не використовуйте більше трьох серверів часу в вашій конфігурації і не робіть капостей з <tt>burst</tt> або 
	<tt>minpoll</tt> - все, чого ви досягнете, це закриття проекту рано чи пізно.</p>
	
	<p><span class="hook">Переконайтеся, що <i>конфігурація часового поясу</i> на вашому комп'ютері зроблена правильно</span>.
	Власне ntpd нічого не знає про часові пояси, він завжди використовує UTC.</p>
	
	<p><span class="hook">Якщо вам необхідно синхронізувати цілу мережу</span>, будь ласка, налаштуйте сервер часу 
	на одному з ваших комп'ютерів, а потім синхронізуйте з ним комп'ютери мережі. (Можливо вам прийдеться почитати документацію, 
	це не складно. В разі ускладнень звертайтесь в конференцію <a href="news:comp.protocols.time.ntp">comp.protocols.time.ntp newsgroup</a>.)</p>
	
	<p class="thanks">Ну і нарешті, я хотів би подякувати всім, хто пожертвував свій час і свої сервера цьому проекту.</p>
</div>
